# insforum
Simplified forum web app.

## Design choices
I have decided to develop the project in Symfony2. Main reasons:

 - Short dead-line, no time nor need to reinvent the wheel.
 - Easy access to several bundles that resolves some of the requirements, like:
   - [VichUploaderBundle](https://github.com/dustin10/VichUploaderBundle) A simple Symfony2 bundle t and o ease file uploads with ORM entities and ODM documents.
   - [Voryx REST Generator Bundle](https://github.com/voryx/restgeneratorbundle) To solve the API Bonus point. This bundle is based on three well known bundles: [FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle), [JMSSerializerBundle](https://github.com/schmittjoh/JMSSerializerBundle) and [NelmioCorsBundle](https://github.com/nelmio/NelmioCorsBundle)

I use git locally to manage my projects, following the branching model defined in [A successful Git branching model](http://nvie.com/posts/a-successful-git-branching-model/) as a general guide, adapting it for each project as needed, so every commit to the master branch reflects a version of the project.

## Requirements
 - [x] Wireframe with tree sections: Top bar, Reply box and Image post box.
   * **Design choice** I have create a separate twig template for each section.
 - [x] Initially only the Top bar and the Reply box are visible. 
 - [x] Successfully uploading an image creates a post. 
 - [x] Empty title is allowed. 
 - [x] The list of posts grows downward with the most recent post at the top. 
 - [x] Support the JPEG image format only.
   - [x] **Bonus points**: Support PNG and (animated) GIF as  well.
 - [x] Image size: upto 1920x1080, upto 2 MB.
   - [ ] **Bonus points**: image size upto 20 MB.
     * **TODO** Create miniatures for the submitted images to be able to serve the same amount of files. Then add a feature: clicking on a image, shows the full version of it.
     * **Idea** Use the above technique with all uploaded images, creating a miniature with a fixed with or height its aspect ratio. This will allow a much better frontend design.
 - [x] #posts increments with each new post.
 - [x] #views increments with each view. 
 - [x] Performance: The post must be visible within 2 seconds, and all the images must be complete loading within 5 seconds on a 10 Mbps Internet connection. 
   * **Design choice** The size in bits of a 2 MB image is 2048 * 1024 * 8 = 16777216 bits. In a 5 second interval of a 10Mbps connection, only 10 * 100000 * 5 = 50000000 bits can be transmited, so we can only send 50000000 / 16777216 = 2.98 images of 2MB. So I have decided to send only the first two images, and provide the user with a *more* button at the bottom of the page. There are several ways to improve this solution, for example, store in the database the size of each file, and send as many images as posible, or implementing the **Idea** of creating miniatures for the images, or let user choose how many images want to receive at a row... This is only a quick and very conservative aproximation to the problem.

 - [x] Clicking the Export button produces a CSV file with a header row and two columns: (image) Title and Filename.
   - [ ] **Bonus points**: Make it possible to export the Excel format as  well.
   - [ ] **Bonus points**: clicking the Export button produces a ZIP file with all images and the  CSV file mentioned above.
 - [x] **Bonus points**: The #posts and #views should update every 15 seconds without reloading  the page.
   * **Design choice** Implemented a mini routine in javascript that reloads de Top bar section every 15 seconds using an Ajax request.
 - [ ] **Bonus points**: Scaling the app 
 - [x] **Bonus points**: The API 
    Basic implementation with [Voryx REST Generator Bundle]( https://github.com/voryx/restgeneratorbundle). The API needs to be tested, and cleaned up, because almost all the code has been auto generated by the bundle.
    * [GET] /api/posts/count -> return #posts
    * [GET] /api/posts       -> return the full list of the posts
    * [GET] /api/posts/{id}  -> return de post by its id
    * [POST] /api/posts      -> store a post in the database, optional title, imageFile needs to be send. Internally uses the same form as the application.
    * [DELETE] /api/posts/{id} -> delete de post by its id
    * [GET] /api/views/count -> return #views

## Others
 - Created a command line command to Clear all posts.
 - Created a command line command to Reset Views counter.
 - **TODO**: Improve the frontend of the app, maybe including [Bootstrap](http://getbootstrap.com/), and asking an artist and a css designer for user friendly and visual attactive solution.
